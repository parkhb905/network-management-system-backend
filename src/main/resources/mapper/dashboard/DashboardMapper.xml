<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.network.nms.mapper.dashboard.DashboardMapper">

    <select id="selectDeviceCountByType" resultType="map">
        SELECT
            cd.code_name AS deviceType
            , COUNT(cd.code) AS count
        FROM
            device dv
        INNER JOIN
            code cd
        ON
            dv.device_type_id = cd.code_id
        WHERE
            dv.deleted = FALSE
        AND
            cd.deleted = FALSE
        GROUP BY
            cd.code
        ORDER BY
            count DESC
    </select>

</mapper>